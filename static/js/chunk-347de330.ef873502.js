(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-347de330"],{3961:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home-global"},[i("RwvArticleList",{attrs:{type:"all"}})],1)},a=[],s=i("64e5"),n={name:"rwv-home-global",components:{RwvArticleList:s["a"]}},l=n,o=i("2877"),c=Object(o["a"])(l,r,a,!1,null,null,null);e["default"]=c.exports},"64e5":function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.isLoading?i("div",{staticClass:"article-preview"},[t._v("Loading articles...")]):i("div",[0===t.articles.length?i("div",{staticClass:"article-preview"},[t._v("\n      No articles are here... yet.\n    ")]):t._e(),t._l(t.articles,(function(t,e){return i("RwvArticlePreview",{key:t.title+e,attrs:{article:t}})})),i("VPagination",{attrs:{pages:t.pages,currentPage:t.currentPage},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],2)])},a=[],s=i("2f62"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"article-preview"},[i("RwvArticleMeta",{attrs:{isPreview:"",article:t.article}}),i("router-link",{staticClass:"preview-link",attrs:{to:t.articleLink}},[i("h1",{domProps:{textContent:t._s(t.article.title)}}),i("p",{domProps:{textContent:t._s(t.article.description)}}),i("span",[t._v("Read more...")]),i("TagList",{attrs:{tags:t.article.tagList}})],1)],1)},l=[],o=i("f1f8"),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{staticClass:"tag-list"},t._l(t.tags,(function(e,r){return i("li",{key:r,staticClass:"tag-default tag-pill tag-outline"},[i("span",{domProps:{textContent:t._s(e)}})])})),0)},u=[],h={name:"TagList",props:{tags:Array}},p=h,g=i("2877"),d=Object(g["a"])(p,c,u,!1,null,null,null),f=d.exports,m={name:"RwvArticlePreview",components:{RwvArticleMeta:o["a"],TagList:f},props:{article:{type:Object,required:!0}},computed:{articleLink(){return{name:"article",params:{slug:this.article.slug}}}}},v=m,C=Object(g["a"])(v,n,l,!1,null,null,null),b=C.exports,P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("nav",[i("ul",{staticClass:"pagination"},t._l(t.pages,(function(e){return i("li",{key:e,class:t.paginationClass(e),attrs:{"data-test":"page-link-"+e},on:{click:function(i){return i.preventDefault(),t.changePage(e)}}},[i("a",{staticClass:"page-link",attrs:{href:""},domProps:{textContent:t._s(e)}})])})),0)])},_=[],w={name:"Pagination",props:{pages:{type:Array,required:!0},currentPage:{type:Number,required:!0}},methods:{changePage(t){t!==this.currentPage&&this.$emit("update:currentPage",t)},paginationClass(t){return{"page-item":!0,active:this.currentPage===t}}}},A=w,y=Object(g["a"])(A,P,_,!1,null,null,null),k=y.exports,$=i("6c33"),L={name:"RwvArticleList",components:{RwvArticlePreview:b,VPagination:k},props:{type:{type:String,required:!1,default:"all"},author:{type:String,required:!1},tag:{type:String,required:!1},favorited:{type:String,required:!1},itemsPerPage:{type:Number,required:!1,default:10}},data(){return{currentPage:1}},computed:{listConfig(){const{type:t}=this,e={offset:(this.currentPage-1)*this.itemsPerPage,limit:this.itemsPerPage};return this.author&&(e.author=this.author),this.tag&&(e.tag=this.tag),this.favorited&&(e.favorited=this.favorited),{type:t,filters:e}},pages(){return this.isLoading||this.articlesCount<=this.itemsPerPage?[]:[...Array(Math.ceil(this.articlesCount/this.itemsPerPage)).keys()].map(t=>t+1)},...Object(s["b"])(["articlesCount","isLoading","articles"])},watch:{currentPage(t){this.listConfig.filters.offset=(t-1)*this.itemsPerPage,this.fetchArticles()},type(){this.resetPagination(),this.fetchArticles()},author(){this.resetPagination(),this.fetchArticles()},tag(){this.resetPagination(),this.fetchArticles()},favorited(){this.resetPagination(),this.fetchArticles()}},mounted(){this.fetchArticles()},methods:{fetchArticles(){this.$store.dispatch($["m"],this.listConfig)},resetPagination(){this.listConfig.offset=0,this.currentPage=1}}},j=L,x=Object(g["a"])(j,r,a,!1,null,null,null);e["a"]=x.exports},f1f8:function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"article-meta"},[i("router-link",{attrs:{to:{name:"profile",params:{username:t.article.author.username}}}},[i("img",{attrs:{src:t.article.author.image}})]),i("div",{staticClass:"info"},[i("router-link",{staticClass:"author",attrs:{to:{name:"profile",params:{username:t.article.author.username}}}},[t._v("\n      "+t._s(t.article.author.username)+"\n    ")]),i("span",{staticClass:"date"},[t._v(t._s(t._f("date")(t.article.createdAt)))])],1),t.actions?i("rwv-article-actions",{attrs:{article:t.article,canModify:t.isCurrentUser()}}):i("button",{staticClass:"btn btn-sm pull-xs-right",class:{"btn-primary":t.article.favorited,"btn-outline-primary":!t.article.favorited},on:{click:t.toggleFavorite}},[i("i",{staticClass:"ion-heart"}),i("span",{staticClass:"counter"},[t._v(" "+t._s(t.article.favoritesCount)+" ")])])],1)},a=[],s=i("2f62"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.canModify?i("span",[i("router-link",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{to:t.editArticleLink}},[i("i",{staticClass:"ion-edit"}),i("span",[t._v(" Edit Article")])]),i("span",[t._v("  ")]),i("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:t.deleteArticle}},[i("i",{staticClass:"ion-trash-a"}),i("span",[t._v(" Delete Article")])])],1):i("span",[i("button",{staticClass:"btn btn-sm btn-outline-secondary",on:{click:t.toggleFollow}},[i("i",{staticClass:"ion-plus-round"}),i("span",[t._v(" ")]),i("span",{domProps:{textContent:t._s(t.followUserLabel)}})]),i("span",[t._v("  ")]),i("button",{staticClass:"btn btn-sm",class:t.toggleFavoriteButtonClasses,on:{click:t.toggleFavorite}},[i("i",{staticClass:"ion-heart"}),i("span",[t._v(" ")]),i("span",{domProps:{textContent:t._s(t.favoriteArticleLabel)}}),i("span",[t._v(" ")]),i("span",{staticClass:"counter",domProps:{textContent:t._s(t.favoriteCounter)}})])])},l=[],o=i("6c33"),c={name:"RwvArticleActions",data(){return{isFollowing:this.article.author.following}},props:{article:{type:Object,required:!0},canModify:{type:Boolean,required:!0}},computed:{...Object(s["b"])(["profile","isAuthenticated"]),editArticleLink(){return{name:"article-edit",params:{slug:this.article.slug}}},toggleFavoriteButtonClasses(){return{"btn-primary":this.article.favorited,"btn-outline-primary":!this.article.favorited}},followUserLabel(){return`${this.isFollowing?"Unfollow":"Follow"} ${this.article.author.username}`},favoriteArticleLabel(){return this.article.favorited?"Unfavorite Article":"Favorite Article"},favoriteCounter(){return`(${this.article.favoritesCount})`}},methods:{toggleFavorite(){if(!this.isAuthenticated)return void this.$router.push({name:"login"});const t=this.article.favorited?o["k"]:o["j"];this.$store.dispatch(t,this.article.slug)},toggleFollow(){if(!this.isAuthenticated)return void this.$router.push({name:"login"});console.log(this.profile);const t=this.isFollowing?o["q"]:o["p"];this.$store.dispatch(t,{username:this.article.author.username}),this.isFollowing=!this.isFollowing},async deleteArticle(){try{await this.$store.dispatch(o["a"],this.article.slug),this.$router.push("/")}catch(t){console.error(t)}}}},u=c,h=i("2877"),p=Object(h["a"])(u,n,l,!1,null,null,null),g=p.exports,d={name:"RwvArticleMeta",components:{RwvArticleActions:g},props:{article:{type:Object,required:!0},actions:{type:Boolean,required:!1,default:!1}},computed:{...Object(s["b"])(["currentUser","isAuthenticated"])},methods:{isCurrentUser(){return!(!this.currentUser.username||!this.article.author.username)&&this.currentUser.username===this.article.author.username},toggleFavorite(){if(!this.isAuthenticated)return void this.$router.push({name:"login"});const t=this.article.favorited?o["k"]:o["j"];this.$store.dispatch(t,this.article.slug)}}},f=d,m=Object(h["a"])(f,r,a,!1,null,null,null);e["a"]=m.exports}}]);
//# sourceMappingURL=chunk-347de330.ef873502.js.map